<!--
TODO: file description

2023-05-26 - Josh Sawyer     : added update user account html (includes updating username and password)
2023-05-29 - Adam Case       : added email change section
2023-05-30 - Nathaniel Mason : added navbar at top of template and some HTML edits

-->

{% extends 'forecast/base.html' %}
{% load static %}

{% block content %}

<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Update Account Information</title>	
<link rel="stylesheet" href="{% static 'css/navbar.css' %}">

<style>
      html {
max-width: 100%;
  overflow-x: hidden;
min-height:100%;
    background:linear-gradient(0deg, rgba(4, 14, 28, 0.9), rgba(4, 14, 28, 0.9)), url("{% static 'img/knight2.jpeg' %}");
    background-size:cover;
}
  body {
    text-align: left;
    margin: 0;
    padding: 0;
    background:rgba(0,0,0,0.00);
  }

  .homelog {
    margin-left: 0;
    margin-top: 2%;
  }

</style>
</head>

<body>
{% if messages %}
{% for message in messages %}
    <p><b>{{ message }}</b></p>
{% endfor %}
{% endif %}
<div id="back-button" style="display: none;">
  <form id="back" action="/users/update-account">
    <button type="submit" id="backbutton" class="homelog">BACK</button>
  </form>
</div>

<div id="username-section">
    {% comment %} <p>Username: <span id="username">{{ request.user.username }}</span></p> {% endcomment %}
    <button id="change-username-btn" class="homelog">Change Username</button>
  </div>
  
  <div id="password-section">
    <button id="change-password-btn" class="homelog">Change Password</button>
  </div>

  <div id="email-section">
    <button id="change-email-btn" class="homelog">Change Email</button>
  </div>

  <div id="name-section">
    <button id="change-name-btn" class="homelog">Change Name</button>
  </div>
  
  <!-- Username Update Form -->
  <div id="username-form" style="display: none;">
    <form id="update-username-form" method="POST" action="{% url 'users:update_account' %}">
      {% csrf_token %}
      <p>Current Username: <span id="username">{{ request.user.username }}</span></p>
      {{ username_form.as_p }}
      <button type="submit" name="update_username" class="homelog">UPDATE</button>
    </form>
  </div>
  
  <!-- Password Update Form -->
  <div id="password-form" style="display: none;">
    <form id="update-password-form" method="POST" action="{% url 'users:update_account' %}">
      {% csrf_token %}
      {{ password_form.as_p }}
      <button type="submit" name="update_password" class="homelog">UPDATE</button>
    </form>
  </div>

  <!-- Email Update Form -->
  <div id="email-form" style="display: none;">
    <form id="update-email-form" method="POST" action="{% url 'users:update_account' %}">
      {% csrf_token %}
      <p>Current Email: <span id="email">{{  request.user.email  }}</span></p>
      {{email_form.as_p}}
      <button type="submit" name="update_email" class="homelog">UPDATE</button>
    </form>
  </div>


  <!-- Name Update Form -->
  <div id="name-form" style="display: none;">
    <form id="update-name-form" method="POST" action="{% url 'users:update_account' %}">
      {% csrf_token %}
      <p>Current Name: <span id="fname">{{  request.user.first_name  }}</span> <span id="lname">{{request.user.last_name}}</span></p>
      {{name_form.as_p}}
      <button type="submit" name="update_name" class="homelog">UPDATE</button>
    </form>
  </div>
  
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(document).ready(function() {
      // Hide function
      function hideSections() {
        $("#username-section").hide();
        $("#password-section").hide();
        $("#email-section").hide();
        $("#name-section").hide();
        $("#back-button").show();
      }

      // Change Username button click event
      $("#change-username-btn").click(function() {
        hideSections();
        $("#username-form").show();
      });
  
      // Change Password button click event
      $("#change-password-btn").click(function() {
        hideSections();
        $("#password-form").show();
      });

      // Change Email button click event
      $("#change-email-btn").click(function() {
        hideSections();
        $("#email-form").show();
      });

      // Change Name button click event
      $("#change-name-btn").click(function() {
        hideSections();
        $("#name-form").show();
      });
    });
  </script>
  
  
</body>
</html>

{% endblock %}
  
  





  


